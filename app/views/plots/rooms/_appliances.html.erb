<% if collection.empty? %>
  <% if room.nil? %>
    <%= render 'components/empty_list', icon_name: "shower", type: Appliance, parent: room %>
  <% else %>
    <%= render 'components/empty_list', icon_name: "shower", type: ApplianceRoom, parent: room %>
  <% end %>
<% else %>
  <% if can_create(Appliance, current_user.permission_level) %>
    <div class="section-actions">
      <% if room %>
        <%= link_to new_room_appliance_room_path(room, plot: plot), class: "btn btn-primary" do %>
          <i class="fa fa-plus"></i>
          <span class="btn-label"><%= t("appliances.collection.create") %></span>
        <% end %>
        <br>
      <% else %>
        <%= link_to new_appliance_path, class: "btn btn-primary" do %>
          <i class="fa fa-plus"></i>
          <span class="btn-label"><%= t(".create") %></span>
        <% end %>
      <% end %>
    </div>
  <% end %>

  <table class="record-list">
    <thead>
      <tr>
        <th class="icon" style="text-align:center;"><%= t(".image") %></th>
        <th colspan="2"><%= sortable(Appliance, :id, t("appliances.collection.name")) %></th>
        <th colspan="2"><%= sortable({ Appliance => ApplianceCategory }, :name, t(".category")) %></th>
        <th colspan="2"><%= sortable(Appliance, :model_num) %></th>
        <th colspan="2"><%= sortable({ Appliance => ApplianceManufacturer }, :name, t(".manufacturer")) %></th>
        <th colspan="2"><%= sortable(Finish, :duplicate) %></th>
        <th colspan="2"><%= sortable(Appliance, :updated_at, t(".last_edited")) %></th>
        <% if current_user&.cf_admin? %><th colspan="2">&nbsp;</th><% end %>
      </tr>
    </thead>
    <tbody>
      <% collection.each do |appliance| %>
        <tr data-appliance="<%= appliance.id %>">
          <td style="text-align:center;"><%= image_tag appliance.primary_image.url if appliance.primary_image? %></td>
          <td colspan="2"><%= link_to appliance.full_name, appliance_path(appliance), title: appliance.full_name %></td>
          <td colspan="2"><%= appliance.appliance_category %></td>
          <td colspan="2"><%= appliance.model_num %></td>
          <td colspan="2"><%= appliance.appliance_manufacturer %></td>
          <% duplicate = appliance.duplicate == true ? "green" : "white" %>
          <td colspan="2"><span class = 'circle <%= duplicate %>'>&nbsp;</span></td>
          <td colspan="2"><%= l appliance.updated_at.to_date, format: :digits %></td>
          <% if current_user&.cf_admin? %>
            <td colspan="2" class="actions">

              <% if appliance.choice == false %>
                <%= edit_btn edit_appliance_path(appliance), element: appliance %>
                <% if room && can?(:destroy, appliance) %>
                  <%= link_to remove_appliance_path(room: room, appliance: appliance, plot: plot), class: "btn remove" do %>
                    <%= fa_icon "trash-o" %>
                  <% end %>
                <% else %>
                  <%= delete_btn appliance, element: appliance %>
                <% end %>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="paging">
    <%= render 'components/page_size' %>
  </div>
<% end %>
