<%= simple_form_for([:admin, user]) do |f| %>
  <% if user.errors.any? %>
    <div class="submission-errors">
      <ul>
        <% user.errors.full_messages.each do |message| %>
            <li>
              <%= fa_icon "exclamation-circle" %>
              <%= message %>
            </li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row user">
    <div class="row-item third">
      <fieldset>
        <%= f.input :email, readonly: user.email? %>
        <%= f.input :first_name %>
        <%= f.input :last_name %>
        <div class="image-container">
          <%= f.input :picture, as: :image_preview, input_html: { preview_version: :thumbnail } %>
        </div>
      </fieldset>
    </div>
    <div class="row-item third">
      <fieldset class="skip-global-selectmenu">
        <%= f.input :role,
          as: :select,
          collection: User::accessible_admin_roles(current_user),
          label_method: ->(role) { t(role.first) },
          value_method: :first,
          include_blank: t("users.choose"),
          selected: selected_role %>
        <%= f.input :job_title %>
        <%= cascade_select_input f, :developer_id, Developer %>
        <%= cascade_select_input f, :division_id, Division %>
        <%= cascade_select_input f, :development_id, Development %>
        <div class="receive_plot_emails">
          <%= f.label t(".plot_emails") %>
          <%= f.check_box :receive_release_emails, id: :plot_check,
                          disabled: !user.enable_receive_release_emails?(current_user) %>
          <p class="checkbox-description"><%= t(".receive_plot_emails") %></p>
        </div>
        <div class="receive_choice_emails">
          <%= f.label t(".choice_emails") %>
          <%= f.check_box :receive_choice_emails, id: :choice_check,
                          disabled: !user.enable_choice_emails?(current_user) %>
          <p class="checkbox-description"><%= t(".receive_choice_emails") %></p>
        </div>
        <div class="receive-snagging-emails">
          <%= f.label t(".snag_emails") %>
          <%= f.check_box :snag_notifications, id: :snag_check %>

          <p class="checkbox-description"><%= t(".receive_snag_emails") %></p>
        </div>
      </fieldset>
    </div>
    <% if user == current_user %>
      <div class="row-item third">
        <fieldset>
          <%= f.input :current_password, label: t(".current_password"), autocomplete: "off", placeholder: t(".current_password2") %>
          <%= f.input :password, label: t(".new_password"), autocomplete: "off" %>
          <%= f.input :password_confirmation, label: t(".confirm_password") %>
        </fieldset>
      </div>
    <% end %>
  </div>

  <div class="form-actions-footer-container">
    <div class="form-actions-footer">
      <%= link_to t(".back"), admin_users_path, class: "btn" %>
      <%= f.submit t(".submit"), class: "btn-form-submit btn-primary" %>
    </div>
  </div>
<% end %>
