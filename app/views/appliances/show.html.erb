<% breadcrumb :appliance, @appliance %>

<div class="section-header">
  <div class="section-title">
    <%= @appliance.full_name %><br>
  </div>
  <div class="section-data">
    <%= edit_btn [:edit, @appliance], element: @appliance %>
    <%= clone_btn clone_appliance_path(@appliance), element: @appliance %>
    <% if current_page?(action: :show) && @warn_on_edit %>
      <div id="confirm-edit" data-title="<%= t('.confirm-edit.title', name: @appliance.full_name)%>">
        <div id="body">
          <p><%= simple_format t('.confirm-edit.body', name: @appliance.full_name, origin: @origin) %></p>
        </div>
      </div>
    <% end %>
  </div>
</div>

<div class="row appliance">
  <div class="row-item third">
    <div class="model">
      <%= label_tag(t("appliances.form.model_num")) %>
      <span><%= @appliance.model_num %></span>
    </div>
    <% if @appliance&.description? %>
      <div class="description">
        <%= label_tag(:description) %>
        <span><%= @appliance.description %></span>
        <br>
      </div>
    <% end %>
    <div class="category">
      <%= label_tag(t("appliances.form.category")) %>
      <span><%= @appliance.appliance_category %></span>
    </div>
    <div class="manufacturer">
      <%= label_tag(:manufacturer) %>
      <span><%= @appliance&.appliance_manufacturer %></span>
    </div>
    <% if @appliance.warranty_length? %>
      <div class="warranty">
        <%= label_tag :warranty, (t("appliances.form.warranty_length")) %>
        <span><%= t("activerecord.attributes.appliance.warranty_length.#{@appliance.warranty_length}") %></span>
      </div>
    <% end %>
    <% if @appliance.e_rating && @appliance.main_uk_e_rating.nil? %>
      <div class="e_rating">
        <label><%=t("appliances.form.e_rating")%></label>
        <span><%= t("activerecord.attributes.appliance.e_rating.#{@appliance.e_rating}") %></span>
      </div>
    <% end %>
    <% if @appliance.main_uk_e_rating %>
      <div class="uk_e_rating">
        <label><%=t("appliances.form.main_uk_e_rating") unless @appliance.washer_dryer? %></label>
        <label><%=t("appliances.form.washerdryer") if @appliance.washer_dryer? %></label>
        <span><%= t("activerecord.attributes.appliance.uk_e_rating.#{@appliance.main_uk_e_rating}") %></span>
      </div>
    <% end %>
    <% if @appliance.supp_uk_e_rating && @appliance.main_uk_e_rating %>
      <div class="uk_e_rating">
        <label><%=t("appliances.form.washer") %></label>
        <span><%= t("activerecord.attributes.appliance.uk_e_rating.#{@appliance.supp_uk_e_rating}") %></span>
      </div>
    <% end %>

  </div>

  <div class="row-item third">
    <% if @appliance.primary_image? %>
      <div class="appliance_primary_image">
        <%= label_tag :appliance_primary_image, t(".primary_image") %>
        <%= image_tag(@appliance.primary_image.url) if @appliance.primary_image? %>
      </div>
    <% end %>

    <% if @appliance.secondary_image? %>
      <div class="appliance_secondary_image">
        <%= label_tag :appliance_secondary_image, t(".secondary_image") %>
        <span><%= image_tag(@appliance.secondary_image.url)  %></span>
      </div>
    <% end %>

    <% if @appliance.manual && @appliance.manual.file %>
      <div class="manual">
      <%= label_tag :manual %>
        <span class="manual-filename readonly"><%= @appliance.manual.file.filename %></span>
        <%= link_to @appliance.manual.url, class: "btn right",  target: "_blank" do %>
          <%= icon "search-plus" %>
        <% end %>
      </div>
    <% end %>

    <% if @appliance&.guide&.file %>
      <div class="guide">
        <%= label_tag :guide %>
        <span class="guide-filename readonly"><%= @appliance.guide.file.filename %></span>
        <%= link_to @appliance.guide.url, class: "btn right",  target: "_blank" do %>
          <%= icon "search-plus" %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<div class="form-actions-footer-container">
  <div class="form-actions-footer">
    <%= link_to t(".back"), appliances_path, class: "btn" %>
  </div>
</div>
