<div class="branded-hero"></div>
<div class="branded-body">
  <div class="outer-container dashboard">
    <!-- find out how many active custom tiles the plot has -->
    <% tiles = @custom_tiles %>

    <% if tiles.size == 1 || tiles.size == 4 %>
    <!-- if one or four tiles is activated then the page styling is different -->
      <div class="one-card">
        <div class="half">
          <div class="row">
            <% if @plot.unit_type_picture.present? %>
              <div class="card my-home black-show-left branded-border" style="background-image: url('<%= image_path(@plot.unit_type_picture) %>')" >
            <% else %>
              <div class="card my-home black-show-left branded-border" style="background-image: url('<%= image_path "Sign In Image 3.jpg" %>')" >
            <% end %>
            <div class="card-header">
              <h2 class="card-title-alt"><%= t('.my_title', construction: @plot.my_home_name) %></h2>
            </div>
            <%= render "homeowners/components/address", plot: @plot, plots: @plots %>
            </div>
          </div>
          <div class="row articles">
            <%= render "homeowners/dashboard/contacts", contacts: @contacts %>
            <%= render "homeowners/dashboard/faqs", faqs: @faqs, plot: @plot %>
            <div class="single-card">
              <%= (render "homeowners/dashboard/tiles/tiles", plot: @plot, tiles: tiles, documents: @all_docs) if tiles.size == 1 %>
              <%= (render "homeowners/components/how_to_summary", collection: @how_tos) if tiles.size == 4 %>
            </div>
          </div>
        </div>
        <div class="half">
          <div class="row library">
            <%= render "homeowners/dashboard/library", documents: @documents %>
          </div>
          <div class="row articles multi-card">
            <%= (render "homeowners/components/how_to_summary", collection: @how_tos) if tiles.size == 1 %>
            <%= (render "homeowners/dashboard/tiles/tiles", plot: @plot, tiles: tiles, documents: @all_docs) if tiles.size == 4 %>
          </div>
        </div>
      </div>
    <% else %>
      <div class="row">
        <% if @plot.unit_type_picture.present? %>
          <div class="card half my-home black-show-left branded-border" style="background-image: url('<%= image_path(@plot.unit_type_picture) %>')" >
        <% else %>
          <div class="card half my-home black-show-left branded-border" style="background-image: url('<%= image_path "Sign In Image 3.jpg" %>')" >
        <% end %>
            <div class="card-header">
              <h2 class="card-title-alt"><%= t('.my_title', construction: @plot.my_home_name) %></h2>
            </div>
            <%= render "homeowners/components/address", plot: @plot, plots: @plots %>
          </div>
      <%= render "homeowners/dashboard/library", documents: @documents %>
      </div>
      <div class="row articles">
        <% if tiles.size == 3 %>
          <%= render "homeowners/dashboard/contacts", contacts: @contacts %>
          <%= render "homeowners/dashboard/faqs", faqs: @faqs, plot: @plot %>
          <%= render "homeowners/components/how_to_summary", collection: @how_tos %>
          <%= render "homeowners/dashboard/tiles/tiles", plot: @plot, tiles: tiles, documents: @all_docs %>
        <% elsif tiles.size == 2 %>
          <%= render "homeowners/dashboard/contacts", contacts: @contacts %>
          <%= render "homeowners/dashboard/faqs", faqs: @faqs, plot: @plot %>
          <%= render "homeowners/dashboard/tiles/tiles", plot: @plot, tiles: tiles, documents: @all_docs %>
          <%= render "homeowners/components/how_to_summary", collection: @how_tos %>
        <% else %> <!-- if zero or five tiles are assigned -->
          <%= render "homeowners/dashboard/contacts", contacts: @contacts %>
          <%= render "homeowners/dashboard/faqs", faqs: @faqs, plot: @plot %>
          <%= (render "homeowners/components/how_to_summary", collection: @how_tos) if tiles.size == 0 %>
          <%= (render "homeowners/dashboard/tiles/tiles", plot: @plot, tiles: tiles, documents: @all_docs) if tiles.size == 5 %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<div id="app-reminder">
  <% byebug %>
  <%= render "homeowners/components/app_download", plot: @plot %>
</div>
